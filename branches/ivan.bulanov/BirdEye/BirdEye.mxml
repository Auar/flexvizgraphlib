<?xml version="1.0" encoding="utf-8"?>

<!--
 * The MIT License
 *
 * Copyright (c) 2007
 * United Nations Office at Geneva
 * Center for Visual Analytics
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 -->
 
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" 
	xmlns:flexlib="http://code.google.com/p/flexlib/"
	xmlns:visualize="org.un.birdeye.visualize.*"
	xmlns:record="org.un.birdeye.record.*"
	xmlns:report="org.un.birdeye.report.*"
	xmlns:measure="org.un.birdeye.measure.*"
	xmlns:help="org.un.birdeye.help.*"
	backgroundGradientColors="[#cccccc, #666666]"
	layout="absolute" preinitialize="dbInit()" creationComplete="onInit();"
	width="100%" height="100%"
	  >
<mx:Script>
	<![CDATA[
       	import flexlib.events.TabReorderEvent;
        import flexlib.controls.SuperTabBar;
        import flexlib.containers.SuperTabNavigator;
        import flexlib.controls.tabBarClasses.SuperTab;
        import flexlib.skins.TabPopUpButtonSkin;
        
        // A nested XML collection for Measure and Report dataProviding
        public var gTreeXML:XML;
        public var gDataXML:XML;
        private function onInit():void
        {
        	tbMain.removeChild(helpCnvs);
        }
        
        // Handler for About Button
        private function clickMenuButtonHandler(event:Event):void {
			var buttonID:String = event.target.id;
			var selected:Boolean = event.target.selected;
			
			switch (buttonID) {
				case "btnHelp":
					if (selected) {
						tbMain.addChild(helpCnvs);
						tbMain.selectedChild = helpCnvs;
					} else
						tbMain.removeChild(helpCnvs);
					break;
				default:
					// trace("default");
			}
		}
       
	]]>
</mx:Script>

<mx:Script source="/org/un/birdeye/sql/DAO.as" />

<!--
<mx:Script source="org/un/birdeye/ui/SaveSnapShot.as" />
-->
<mx:Style source="/org/un/birdeye/style/css/main.css" />



<mx:VBox width="100%" height="100%" horizontalAlign="center" paddingBottom="5" paddingLeft="5" paddingRight="5" paddingTop="5" >
	<mx:ApplicationControlBar width="99%" height="48"  >
	
	<mx:HBox width="100%" height="100%" verticalAlign="middle">
	<mx:Image source="@Embed(source='/org/un/birdeye/images/nodes/UNlogo.png')" width="42" height="42" verticalAlign="middle" />
	<mx:VBox width="100%" height="100%" verticalGap="-1" >
	<mx:Label id="birdEyeTitle" width="100%" height="21" text="BIRDEYE" bottom="0" fontSize="12" textAlign="left" paddingRight="5" />
	<mx:HRule width="100%" />
	<mx:Label id="UNOG" width="100%" height="21" text="United Nations Office at Geneva: Centre for Visual Analytics" fontSize="9" bottom="1" textAlign="left" paddingRight="5" />
	</mx:VBox>
	
	<mx:Button 
			toolTip="Take Snapshot and save as image file" width="30" height="30"
			icon="@Embed(source='/org/un/birdeye/images/ui/camera.png')" 
  			id="btnSnapShot"
  			/>
	<mx:Button 
			toolTip="Help..."
			icon="@Embed(source='/org/un/birdeye/images/ui/help.png')" 
  			id="btnHelp" selected="false" width="30" height="30"
  			toggle="true" click="clickMenuButtonHandler(event);"
  			/>
  	</mx:HBox>
	</mx:ApplicationControlBar>
	
	<flexlib:SuperTabNavigator  x="10" y="10" minTabWidth="100" width="99%" height="100%" closePolicy="{SuperTab.CLOSE_NEVER}" id="tbMain" selectedIndex="0" paddingBottom="5" paddingLeft="5" paddingRight="5" creationPolicy="auto" >
	
		<!-- Visualization tab -->
		<mx:Canvas id="vizCnvs" label="Visualize" icon="@Embed('/org/un/birdeye/images/ui//visualization.png')" width="100%" height="100%" >
			<visualize:Visualize width="100%" height="100%"  />		
		</mx:Canvas>
			
		<!-- Measure tab -->
		<mx:Canvas id="measureCnvs" label="Measure" icon="@Embed('/org/un/birdeye/images/ui/measure.png')" width="100%" height="100%" >
			<measure:Measure width="100%" height="100%" />				
		</mx:Canvas>
		
		<!-- Record tab -->
		<mx:Canvas id="recordCnvs" label="Record" icon="@Embed('/org/un/birdeye/images/ui/record.png')" width="100%" height="100%" >
			<record:Record width="100%" height="100%" />	
		</mx:Canvas>
		
		<!-- Report tab -->
		<mx:Canvas id="reportCnvs" label="Report" icon="@Embed('/org/un/birdeye/images/ui/report.png')" width="100%" height="100%" >
			<report:Report width="100%" height="100%" />	
		</mx:Canvas>
		
		<!-- Help tab -->
		<mx:Canvas id="helpCnvs" label="Help" icon="@Embed('/org/un/birdeye/images/ui/help.png')" width="100%" height="100%" >
			<help:Help width="100%" height="100%" />
		</mx:Canvas>

	</flexlib:SuperTabNavigator>
</mx:VBox>
</mx:WindowedApplication>
